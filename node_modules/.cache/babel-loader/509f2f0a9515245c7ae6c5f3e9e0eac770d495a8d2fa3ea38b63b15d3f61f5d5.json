{"ast":null,"code":"import React,{useEffect,useState}from'react';import CellComponent from'./CellComponent';import{jsx as _jsx}from\"react/jsx-runtime\";const BoardComponent=_ref=>{let{board,setBoard}=_ref;const[selectedCell,setSelectedCell]=useState(null);function click(cell){var _selectedCell$figure;if(selectedCell&&selectedCell!==cell&&(_selectedCell$figure=selectedCell.figure)!==null&&_selectedCell$figure!==void 0&&_selectedCell$figure.canMove(cell)){selectedCell.moveFigure(cell);setSelectedCell(null);updateBoard();}else{setSelectedCell(cell);}}useEffect(()=>{highlightCells();},[selectedCell]);function highlightCells(){board.highlightCells(selectedCell);updateBoard();}function updateBoard(){const newBoard=board.getCopyBoard();setBoard(newBoard);}return/*#__PURE__*/_jsx(\"div\",{className:\"board\",children:board.cells.map((row,index)=>/*#__PURE__*/_jsx(React.Fragment,{children:row.map(cell=>/*#__PURE__*/_jsx(CellComponent,{click:click,cell:cell,selected:cell.x===(selectedCell===null||selectedCell===void 0?void 0:selectedCell.x)&&cell.y===(selectedCell===null||selectedCell===void 0?void 0:selectedCell.y)},cell.id))},index))});};export default BoardComponent;","map":{"version":3,"names":["React","useEffect","useState","CellComponent","jsx","_jsx","BoardComponent","_ref","board","setBoard","selectedCell","setSelectedCell","click","cell","_selectedCell$figure","figure","canMove","moveFigure","updateBoard","highlightCells","newBoard","getCopyBoard","className","children","cells","map","row","index","Fragment","selected","x","y","id"],"sources":["/home/liza/Рабочий стол/chess-game/chess-app/src/components/BoardComponent.tsx"],"sourcesContent":["import React, {FC,useEffect, useState} from 'react'\nimport { Board } from \"../models/Board\";\nimport CellComponent from './CellComponent';\nimport { Cell } from '../models/Cell';\n\ninterface BoardProps {\n    board: Board;\n    setBoard: (board: Board) => void;\n}\n\nconst BoardComponent: FC<BoardProps> = ({board, setBoard}) =>{\n    const [selectedCell, setSelectedCell] = useState<Cell | null>(null);\n\n    function click(cell:Cell) {\n        if(selectedCell && selectedCell !== cell  && selectedCell.figure?.canMove(cell)){\n            selectedCell.moveFigure(cell);\n            setSelectedCell(null);\n            updateBoard()\n        } else {\n            setSelectedCell(cell);\n        }\n    }\n\n    useEffect (() => {\n        highlightCells()\n    }, [selectedCell])\n\n    function highlightCells() {\n        board.highlightCells(selectedCell)\n        updateBoard()\n    }\n    \n    function updateBoard() {\n        const newBoard = board.getCopyBoard()\n        setBoard(newBoard)\n    }\n\n    return (\n        <div className='board'>\n            {board.cells.map((row, index) => \n                <React.Fragment key={index}>\n                    {row.map(cell =>\n                        <CellComponent\n                            click = {click}\n                            cell = {cell}\n                            key = {cell.id}\n                            selected = {cell.x === selectedCell?.x && cell.y === selectedCell?.y}\n                        />\n                    )}\n                </React.Fragment>\n            )}\n        </div>\n    )\n}\n\nexport default BoardComponent"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAMC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAEnD,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAQ5C,KAAM,CAAAC,cAA8B,CAAGC,IAAA,EAAsB,IAArB,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAAF,IAAA,CACrD,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAGT,QAAQ,CAAc,IAAI,CAAC,CAEnE,QAAS,CAAAU,KAAKA,CAACC,IAAS,CAAE,KAAAC,oBAAA,CACtB,GAAGJ,YAAY,EAAIA,YAAY,GAAKG,IAAI,GAAAC,oBAAA,CAAKJ,YAAY,CAACK,MAAM,UAAAD,oBAAA,WAAnBA,oBAAA,CAAqBE,OAAO,CAACH,IAAI,CAAC,CAAC,CAC5EH,YAAY,CAACO,UAAU,CAACJ,IAAI,CAAC,CAC7BF,eAAe,CAAC,IAAI,CAAC,CACrBO,WAAW,CAAC,CAAC,CACjB,CAAC,IAAM,CACHP,eAAe,CAACE,IAAI,CAAC,CACzB,CACJ,CAEAZ,SAAS,CAAE,IAAM,CACbkB,cAAc,CAAC,CAAC,CACpB,CAAC,CAAE,CAACT,YAAY,CAAC,CAAC,CAElB,QAAS,CAAAS,cAAcA,CAAA,CAAG,CACtBX,KAAK,CAACW,cAAc,CAACT,YAAY,CAAC,CAClCQ,WAAW,CAAC,CAAC,CACjB,CAEA,QAAS,CAAAA,WAAWA,CAAA,CAAG,CACnB,KAAM,CAAAE,QAAQ,CAAGZ,KAAK,CAACa,YAAY,CAAC,CAAC,CACrCZ,QAAQ,CAACW,QAAQ,CAAC,CACtB,CAEA,mBACIf,IAAA,QAAKiB,SAAS,CAAC,OAAO,CAAAC,QAAA,CACjBf,KAAK,CAACgB,KAAK,CAACC,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACxBtB,IAAA,CAACL,KAAK,CAAC4B,QAAQ,EAAAL,QAAA,CACVG,GAAG,CAACD,GAAG,CAACZ,IAAI,eACTR,IAAA,CAACF,aAAa,EACVS,KAAK,CAAIA,KAAM,CACfC,IAAI,CAAIA,IAAK,CAEbgB,QAAQ,CAAIhB,IAAI,CAACiB,CAAC,IAAKpB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEoB,CAAC,GAAIjB,IAAI,CAACkB,CAAC,IAAKrB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEqB,CAAC,CAAC,EAD9DlB,IAAI,CAACmB,EAEf,CACL,CAAC,EARgBL,KASL,CACpB,CAAC,CACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAArB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}